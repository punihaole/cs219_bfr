CC = gcc
CFLAGS = -O2 -Wall -iquote ../include
CLINK = -L../lib -lccnu -lcon -lccnumr -pthread -lm 
SRC_DIR = src
OBJ_DIR = obj
BIN_DIR = bin

all: $(BIN_DIR) $(OBJ_DIR) $(BIN_DIR)/consumer_simple $(BIN_DIR)/producer_simple $(BIN_DIR)/getsummary $(BIN_DIR)/cftp $(BIN_DIR)/cftps

clean:
	rm -f $(SRC_DIR)/*~
	rm -f $(OBJ_DIR)
	rm -f $(BIN_DIR)

$(BIN_DIR):
	mkdir -p $(BIN_DIR)

$(OBJ_DIR):
	mkdir -p $(OBJ_DIR)

$(BIN_DIR)/consumer_simple: $(OBJ_DIR)/consumer_simple.o
	$(CC) $(CFLAGS) $(OBJ_DIR)/consumer_simple.o $(CLINK) -o $(BIN_DIR)/consumer_simple

$(BIN_DIR)/producer_simple: $(OBJ_DIR)/producer_simple.o
	$(CC) $(CFLAGS) $(OBJ_DIR)/producer_simple.o $(CLINK) -o $(BIN_DIR)/producer_simple

$(BIN_DIR)/getsummary: $(OBJ_DIR)/getsummary.o
	$(CC) $(CFLAGS) $(OBJ_DIR)/getsummary.o $(CLINK) -o $(BIN_DIR)/getsummary

$(BIN_DIR)/cftp: $(OBJ_DIR)/cftp.o
	$(CC) $(CFLAGS) $(OBJ_DIR)/cftp.o $(CLINK) -o $(BIN_DIR)/cftp

$(BIN_DIR)/cftps: $(OBJ_DIR)/cftps.o
	$(CC) $(CFLAGS) $(OBJ_DIR)/cftps.o $(CLINK) -o $(BIN_DIR)/cftps

$(OBJ_DIR)/consumer_simple.o: $(SRC_DIR)/consumer_simple.c
	$(CC) $(CFLAGS) -c $(SRC_DIR)/consumer_simple.c -o $(OBJ_DIR)/consumer_simple.o

$(OBJ_DIR)/producer_simple.o: $(SRC_DIR)/producer_simple.c
	$(CC) $(CFLAGS) -c $(SRC_DIR)/producer_simple.c -o $(OBJ_DIR)/producer_simple.o

$(OBJ_DIR)/getsummary.o: $(SRC_DIR)/getsummary.c
	$(CC) $(CFLAGS) -c $(SRC_DIR)/getsummary.c -o $(OBJ_DIR)/getsummary.o	

$(OBJ_DIR)/cftp.o: $(SRC_DIR)/cftp.c
	$(CC) $(CFLAGS) -c $(SRC_DIR)/cftp.c -o $(OBJ_DIR)/cftp.o

$(OBJ_DIR)/cftps.o: $(SRC_DIR)/cftps.c
	$(CC) $(CFLAGS) -c $(SRC_DIR)/cftps.c -o $(OBJ_DIR)/cftps.o
